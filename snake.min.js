var Game=Game||{};Game.InputHandler=function(){"use strict";this.keysDown={},this.lastKey=null,this.mouse={},this.mouse={x:0,y:0,clicked:!1,down:!1},this.pressed=!1},Game.InputHandler.prototype.KEY={BACK_SPACE:8,TAB:9,RTN:13,SHIFT:16,CTRL:17,ALT:18,BREAK:19,CAPS:20,ESC:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,NUM_PAD_MULT:106,NUM_PAD_PLUS:107,NUM_PAD_MINUS:109,NUM_PAD_PERIOD:110,NUM_PAD_DIV:111,NUM_LOCK:144,SCROLL_LOCK:145,SEMI_COLON:186,EQUAL_SIGN:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,GRAVE_ACCENT:192,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222},function(){var t;for(t=0;10>t;t++)Game.InputHandler.prototype.KEY[""+t]=48+t}(),function(){var t;for(t=65;91>t;t++)Game.InputHandler.prototype.KEY[""+String.fromCharCode(t)]=t}(),function(){var t;for(t=96;106>t;t++)Game.InputHandler.prototype.KEY["NUM_PAD_"+(t-96)]=t}(),function(){var t;for(t=112;124>t;t++)Game.InputHandler.prototype.KEY["F"+(t-111)]=t}(),Game.InputHandler.prototype.register=function(){"use strict";var t;t=this,document.addEventListener("keydown",function(e){(e.keyCode!==t.KEY.F5||e.keyCode!==t.KEY.F11)&&(e.preventDefault(),e.stopPropagation()),t.keysDown[e.keyCode]=!0}),document.addEventListener("keyup",function(e){(e.keyCode!==t.KEY.F5||e.keyCode!==t.KEY.F11)&&(e.preventDefault(),e.stopPropagation()),delete t.keysDown[e.keyCode]}),document.addEventListener("mouseover",function(e){t.mouse.x=e.offsetX,t.mouse.y=e.offsetY}),document.addEventListener("mousedown",function(e){t.mouse.down=!0}),document.addEventListener("click",function(e){t.mouse.clicked=!0}),document.addEventListener("mouseup",function(e){t.mouse.down=!1})},Game.InputHandler.prototype.isDown=function(t){"use strict";return this.keysDown[this.KEY[t]]?!0:!1},Game.InputHandler.prototype.update=function(){"use strict";var t,e;t=Object.keys(this.keysDown),e=t.length>0?this.keysDown[t[0]]:null,this.pressed=e!==this.lastKey,this.lastKey=this.keysDown[t[0]]},Game.InputHandler.prototype.reset=function(){"use strict";this.keysDown={},this.lastKey=null,this.mouse={},this.mouse={x:0,y:0,clicked:!1,down:!1},this.pressed=!1};var Game=Game||{};Game.Snake=function(t,e,i){"use strict";this.width=t,this.height=e,this.blockWidth=i.blockWidth||20,this.blockHeight=i.blockHeight||20,this.columns=Math.round(this.width/this.blockWidth),this.rows=Math.round(this.height/this.blockHeight),this.midCol=Math.floor(this.columns/2),this.midRow=Math.floor(this.rows/2),this.snake=[[this.midCol,this.midRow],[this.midCol-1,this.midRow],[this.midCol-2,this.midRow]],this.direction="right",this.pause=!1,this.gameOver=!1,this.food=[],this.foodCount=0},Game.Snake.prototype.DIRECTIONS={UP:"up",RIGHT:"right",DOWN:"down",LEFT:"left"},Game.Snake.prototype.blockPosition=function(t,e){"use strict";return{x:t*this.blockWidth,y:e*this.blockHeight}},Game.Snake.prototype.moveSnake=function(){"use strict";var t,e=this.snake[0][0],i=this.snake[0][1];this.direction===this.DIRECTIONS.UP?i-=1:this.direction===this.DIRECTIONS.RIGHT?e+=1:this.direction===this.DIRECTIONS.DOWN?i+=1:this.direction===this.DIRECTIONS.LEFT&&(e-=1),this.food[0]!==e||this.food[1]!==i?t=this.snake.pop():(this.food=[],this.foodCount+=1),t=[e,i],this.snake.unshift(t)},Game.Snake.prototype.isIntersecting=function(t,e){"use strict";return e.some(function(e){return e[0]===t[0]&&e[1]===t[1]})},Game.Snake.prototype.isGameOver=function(){"use strict";var t=this.snake[0];return t[0]<0||t[0]>=this.columns||t[1]<0||t[1]>=this.rows||this.isIntersecting(t,this.snake.slice(1))?!0:!1},Game.Snake.prototype.getRandomInt=function(t,e){"use strict";return Math.floor(Math.random()*(e-t))+t},Game.Snake.prototype.reset=function(){this.snake=[[this.midCol,this.midRow],[this.midCol-1,this.midRow],[this.midCol-2,this.midRow]],this.food=[],this.foodCount=0,this.direction="right",this.gameOver=!1},Game.Snake.prototype.update=function(t){"use strict";this.gameOver=this.isGameOver(),this.gameOver?t.pressed&&t.isDown("RTN")&&this.reset():(t.pressed&&t.isDown("ESC")&&(this.pause=!this.pause),this.pause||(0===this.food.length&&(this.food=[this.getRandomInt(0,this.columns),this.getRandomInt(0,this.rows)]),this.direction!==this.DIRECTIONS.DOWN&&(t.isDown("UP")||t.isDown("W"))?this.direction=this.DIRECTIONS.UP:this.direction!==this.DIRECTIONS.LEFT&&(t.isDown("RIGHT")||t.isDown("D"))?this.direction=this.DIRECTIONS.RIGHT:this.direction!==this.DIRECTIONS.UP&&(t.isDown("DOWN")||t.isDown("S"))?this.direction=this.DIRECTIONS.DOWN:this.direction!==this.DIRECTIONS.RIGHT&&(t.isDown("LEFT")||t.isDown("A"))&&(this.direction=this.DIRECTIONS.LEFT),this.moveSnake()))},Game.Snake.prototype.render=function(t){"use strict";var e,i,s,n=this;t.beginPath(),t.fillStyle="#000000",t.fillRect(0,0,this.width,this.height),t.closePath(),t.beginPath(),this.snake.forEach(function(i){e=n.blockPosition(i[0],i[1]),t.fillStyle="#FFFFFF",t.rect(e.x,e.y,n.blockWidth,n.blockHeight),t.lineWidth="1",t.strokeStyle="#000000",t.rect(e.x,e.y,n.blockWidth,n.blockHeight)}),t.closePath(),t.fill(),t.stroke(),t.beginPath(),s=this.blockPosition(this.food[0],this.food[1]),t.fillStyle="#FF5566",t.rect(s.x,s.y,this.blockWidth,this.blockHeight),t.closePath(),t.fill(),this.pause&&(t.beginPath(),t.font="bold 120px Helvetica, Verdana, san-serif",t.fillStyle="#FFDD88",i=t.measureText("Paused").width,t.fillText("Paused",this.width/2-i/2,this.height/2),t.closePath()),this.gameOver&&(t.beginPath(),t.font="bold 120px Helvetica, Verdana, san-serif",t.fillStyle="#FFDD88",i=t.measureText("Game Over").width,t.fillText("Game Over",this.width/2-i/2,this.height/2),t.closePath(),t.beginPath(),t.font="80pt Helvetica, Verdana, sans-serif",t.fillStyle="#FFFFFF",i=t.measureText("Try Again?").width,t.fillText("Try Again?",this.width/2-i/2,this.height/2+120),t.closePath())};var Game=Game||{};Game.Engine=function(t,e,i){"use strict";this.canvas=document.getElementById(t),this.canvas.width=e,this.canvas.height=i},Game.Engine.prototype.init=function(){"use strict";this.canvas.focus(),this.ctx=this.canvas.getContext("2d"),this.inputHandler=new Game.InputHandler,this.inputHandler.register()},Game.Engine.prototype.register=function(t){"use strict";this.screen=t},Game.Engine.prototype.update=function(){"use strict";this.inputHandler.update(),this.screen.update(this.inputHandler)},Game.Engine.prototype.render=function(){"use strict";this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.screen.render(this.ctx)},Game.Engine.prototype.stop=function(){"use strict";delete this.screen,this.screen=null},Game.Engine.prototype.switchScreens=function(t){"use strict";this.stop(),this.inputHandler.reset(),this.register(t)},Game.Engine.prototype.step=function(){"use strict";this.update(),this.render()};var animate,Game=Game||{},WIDTH=window.innerWidth,HEIGHT=window.innerHeight,FPS=50,engine=new Game.Engine("game",WIDTH,HEIGHT);engine.init(),engine.register(new Game.Snake(WIDTH,HEIGHT,{})),animate=function(t){window.setTimeout(t,FPS)},function(){"use strict";function t(){Game.stopLoop=animate(t),engine.step()}t()}();